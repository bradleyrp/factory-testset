variables:
  force_field: martini
  art_director: art_collar.py
  selectors:
    protein_selection: (name BB or name SC1 or name SC2 or name SC3 or name SC4 or name SC5)
    protein_backbone: name BB
    resnames_lipid: ['DOPC','DOPS','POP2','POPC']
slices:
  lipid-random:
    readymade_gmx:
      current_long:
        gro: "protein-lipid-random.gro"
        xtcs: ['protein-lipid-random.xtc']
      current:
        gro: "protein-lipid-random.gro"
        xtcs: ['protein-lipid-random-skip10.xtc']
  lipid-collar:
    readymade_gmx:
      current_long:
        gro: "protein-lipid-collar.gro"
        xtcs: ['protein-lipid-collar.xtc']
      current:
        gro: "protein-lipid-collar.gro"
        xtcs: ['protein-lipid-collar-skip10.xtc']
collections:
  all: 
    - lipid-random
    - lipid-collar
  protein_laden: 
    - lipid-random
    - lipid-collar
meta:
  lipid-random: 
    label: "random proteins"
    nprots: 14
  lipid-collar: 
    label: "collar proteins"
    nprots: 14
calculations:
  protein_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: protein_laden
  lipid_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: all
    specs:
      selector:
        loop:
          lipid_com:
            resnames: +selectors/resnames_lipid
            type: com
      separator: 
        lipid_tip: "name PO4"
        monolayer_cutoff: 1.4
        topologize_tolerance: 0.10
      nojumps: "z"
  undulations:
    uptype: post
    group: all
    slice_name: current
    collections: all
    specs:
      grid_spacing: 0.5
      upstream: lipid_abstractor
  lipid_mesh:
    uptype: post
    slice_name: current
    collections: all
    specs:
      upstream:
        lipid_abstractor:
          selector: lipid_com
  curvature_undulation_coupling:
    uptype: post
    group: all
    slice_name: current
    collections: protein_laden
    specs:
      loader_membrane:
        module: codes.curvature_coupling_loader
        function: curvature_coupling_loader_membrane
      loader_protein:
        module: codes.curvature_coupling_loader
        function: curvature_coupling_loader_protein
      upstream:
        protein_abstractor: {}
        undulations:
          grid_spacing: 0.5
      design:
        loop:
          v1:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: protein_dynamic_single
            extents:
              method: fixed_isotropic
              extent: 1.0
            curvature_sum: mean
plots:
  lipid_mesh:
    autoplot: True
    slices: current
    collections: all
    calculation: 
      lipid_mesh:
        lipid_abstractor:
          selector: lipid_com
  undulations:
    autoplot: True
    calculation: 
      undulations:
        grid_spacing: 0.5
    slices: current
    collections: all
  curvature_undulation_coupling:
    autoplot: True
    collections: protein_laden
    calculation: 
      - protein_abstractor
      - undulations
