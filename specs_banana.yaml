collections:
  all:
    - v007
    - v008
  proteins:
    - v007
    - v008
slices:
  v008:
    readymade_gmx:
      current:
        gro: "v008.200000-700000-1000.all.pbcmol.gro"
        xtcs: ['v008.200000-700000-1000.all.pbcmol.xtc']
  v007:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current_v0: {'pbc':'mol','groups':['all','proteins'],'start':600000,'end':1200000,'skip':500}
      current: {'pbc':'mol','groups':['all','proteins'],'start':700000,'end':1200000,'skip':1000}
variables:
  force_field: martini
  selectors:
    protein_selection: (name BB or name SC1 or name SC2 or name SC3 or name SC4 or name SC5)
    protein_backbone: name BB
    resnames_lipid: ['DOPC','DOPS','POP2','POPC']
    resnames_PIP2: ['POP2','PIP2']
  lipid_names:
    POP2: "$\\mathrm{{PIP}_{2}}$"
meta:
  short_namer: "lambda sn,spot: sn"
  v007:
    label: endophilin
  v008:
    label: IRSp53
calculations:
  protein_abstractor:
    uptype: simulation
    slice_name: current
    group: proteins
    collections: proteins
  lipid_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: all
    specs:
      selector:
        loop:
          lipid_com:
            resnames: +selectors/resnames_lipid
            type: com
      separator: 
        lipid_tip: "name PO4"
        monolayer_cutoff: 1.4
        topologize_tolerance: 0.10
      nojumps: "z"
  undulations:
    uptype: post
    group: all
    slice_name: current
    collections: all
    specs:
      grid_spacing: 0.5
      upstream: lipid_abstractor
  lipid_mesh:
    uptype: post
    slice_name: current
    collections: all
    specs:
      # memory problems with sklearn.manifold.isomap.Isomap on large systems
      curvilinear: False
      upstream:
        lipid_abstractor:
          selector: lipid_com
plots:
  undulations:
    autoplot: True
    calculation: 
      undulations:
        grid_spacing: 0.5
    slices: current
    collections: all
  lipid_mesh:
    autoplot: True
    slices: current
    collections: all
    calculation: 
      lipid_mesh:
        lipid_abstractor:
          selector: lipid_com
