calculations:
  protein_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: all
  lipid_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: all
    specs:
      selector:
        loop:
          lipid_com:
            resnames: +selectors/resnames_lipid
            type: com
          lipid_phosphate:
            resnames: +selectors/resnames_lipid
            selection: "name P or name PO4"
            type: select
      separator: 
        lipid_tip: "name P"
        monolayer_cutoff: 1.0
        topologize_tolerance: 0.05
  undulations:
    uptype: post
    group: all
    slice_name: current
    collections: all
    specs:
      grid_spacing: 0.5
      upstream: 
        lipid_abstractor:
          selector: lipid_com
  curvature_undulation_coupling:
    uptype: post
    group: all
    slice_name: current
    collections: all
    specs:
      loader_membrane:
        module: codes.curvature_coupling_loader
        function: curvature_coupling_loader_membrane
      loader_protein:
        module: codes.curvature_coupling_loader
        function: curvature_coupling_loader_protein
      upstream:
        protein_abstractor: {}
        undulations:
          grid_spacing: 0.5
      design:
        loop:
          v20:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: neighborhood
              distance_cutoff: 5.0
              spacer: 2.5
            extents:
              method: fixed_isotropic
              extent: 2.5
            curvature_sum: mean
          v21:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: neighborhood
              distance_cutoff: 5.0
              spacer: 2.5
            extents:
              method: fixed_isotropic
              extent: 1.0
            curvature_sum: mean
          v22:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: neighborhood
              distance_cutoff: 10.0
              spacer: 2.5
            extents:
              method: fixed_isotropic
              extent: 2.5
            curvature_sum: mean
          v3:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: protein_dynamic_single
            extents:
              method: fixed_isotropic
              extent: 1.0
            curvature_sum: mean
          v4:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: protein_dynamic_single
            extents:
              method: fixed_isotropic
              extent: 2.0
            curvature_sum: mean
          v5:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: protein_dynamic_single
            extents:
              method: fixed_isotropic
              extent: 4.0
            curvature_sum: mean
          v6:
            store_instantaneous_fields: True
            style: wilderness
            curvature_positions: 
              method: protein_dynamic_single
            extents:
              method: fixed_isotropic
              extent: 8.0
            curvature_sum: mean
plots:
  curvature_undulation_coupling:
    autoplot: True
    collections: all
    calculation: 
      - protein_abstractor
      - undulations
